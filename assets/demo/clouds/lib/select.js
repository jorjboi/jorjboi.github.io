var SELECTED,INTERSECTED,plane,SelectUtils={highlightCurr:function(){if(scenes[0].children.length>4)for(var e=1;e<currGenGroup.children.length;e++)currGenGroup.children[e].material=currGenMaterial;renderOnce()},unhighlightCurr:function(){if(currGenGroup&&scenes[0].children.length>4){for(var e=1;e<currGenGroup.children.length;e++)currGenGroup.children[e].material=unMaterial;scenes[0].remove(currGen.edges)}renderOnce()},raycaster:new THREE.Raycaster,offset:new THREE.Vector3,single:!1},Select={init:function(){SELECTED&&(SelectUtils.unhighlightCurr(),SELECTED=null)},exit:function(){cancelAnimationFrame(requestID),SelectUtils.unhighlightCurr(),currGen=null,currGenGroup=null},mousedown:function(e){e.preventDefault(),SelectUtils.raycaster.setFromCamera(Mouse.mouseToNDC(e),cameras[0]),Mouse.dragging=!0;var r=SelectUtils.raycaster.intersectObjects(objects);if(r.length>0){var t=(SELECTED=r[0].object).parent;t!=currGenGroup&&(SelectUtils.unhighlightCurr(),currGenGroup=t,currGen=groupDict[t.id.toString()],SelectUtils.highlightCurr()),scenes[0].add(currGen.edges),renderOnce(),(r=SelectUtils.raycaster.intersectObject(plane)).length>0&&(SelectUtils.offset.copy(r[0].point).sub(plane.position),viewport.style.cursor="move")}else SELECTED=null,SelectUtils.unhighlightCurr()},mousemove:function(e){var r;if(SelectUtils.raycaster.setFromCamera(Mouse.mouseToNDC(e),cameras[0]),SELECTED){if(!Mouse.dragging)return;return render(),void((r=SelectUtils.raycaster.intersectObject(plane)).length>0&&(SelectUtils.single||SELECTED.position.copy(r[0].point.sub(SelectUtils.offset))))}if((r=SelectUtils.raycaster.intersectObjects(objects)).length>0&&r[0].id!=sky.id){var t=(INTERSECTED=r[0].object).parent;t!=currGenGroup&&(SelectUtils.unhighlightCurr(),currGenGroup=t,currGen=groupDict[t.id.toString()],SelectUtils.highlightCurr()),plane.position.copy(INTERSECTED.position),plane.lookAt(cameras[0].position)}else SelectUtils.unhighlightCurr(),INTERSECTED=null,currGen=null,currGenGroup=null},mouseup:function(){viewport.style.cursor="auto",stopRender(),Mouse.dragging=!1}};