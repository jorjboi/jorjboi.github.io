THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*z.autoRotateSpeed}function o(){return Math.pow(.95,z.zoomSpeed)}function a(e){q.theta-=e}function i(e){q.phi-=e}function r(e){z.object instanceof THREE.PerspectiveCamera?K/=e:z.object instanceof THREE.OrthographicCamera?(z.object.zoom=Math.max(z.minZoom,Math.min(z.maxZoom,z.object.zoom*e)),z.object.updateProjectionMatrix(),G=!0):z.enableZoom=!1}function c(e){z.object instanceof THREE.PerspectiveCamera?K*=e:z.object instanceof THREE.OrthographicCamera?(z.object.zoom=Math.max(z.minZoom,Math.min(z.maxZoom,z.object.zoom/e)),z.object.updateProjectionMatrix(),G=!0):z.enableZoom=!1}function s(e){W.set(e.clientX,e.clientY)}function u(e){oe.set(e.clientX,e.clientY)}function m(e){ee.set(e.clientX,e.clientY)}function l(e){J.set(e.clientX,e.clientY),$.subVectors(J,W);var t=z.domElement===document?z.domElement.body:z.domElement;a(2*Math.PI*$.x/t.clientWidth*z.rotateSpeed),i(2*Math.PI*$.y/t.clientHeight*z.rotateSpeed),W.copy(J),z.update()}function E(e){ae.set(e.clientX,e.clientY),ie.subVectors(ae,oe),ie.y>0?r(o()):ie.y<0&&c(o()),oe.copy(ae),z.update()}function h(e){te.set(e.clientX,e.clientY),ne.subVectors(te,ee),se(ne.x,ne.y),ee.copy(te),z.update()}function d(){}function p(e){var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?c(o()):t<0&&r(o()),z.update()}function b(e){switch(e.keyCode){case z.keys.UP:se(0,z.keyPanSpeed),z.update();break;case z.keys.BOTTOM:se(0,-z.keyPanSpeed),z.update();break;case z.keys.LEFT:se(z.keyPanSpeed,0),z.update();break;case z.keys.RIGHT:se(-z.keyPanSpeed,0),z.update()}}function f(e){W.set(e.touches[0].pageX,e.touches[0].pageY)}function v(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);oe.set(0,o)}function g(e){ee.set(e.touches[0].pageX,e.touches[0].pageY)}function T(e){J.set(e.touches[0].pageX,e.touches[0].pageY),$.subVectors(J,W);var t=z.domElement===document?z.domElement.body:z.domElement;a(2*Math.PI*$.x/t.clientWidth*z.rotateSpeed),i(2*Math.PI*$.y/t.clientHeight*z.rotateSpeed),W.copy(J),z.update()}function R(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);ae.set(0,a),ie.subVectors(ae,oe),ie.y>0?c(o()):ie.y<0&&r(o()),oe.copy(ae),z.update()}function O(e){te.set(e.touches[0].pageX,e.touches[0].pageY),ne.subVectors(te,ee),se(ne.x,ne.y),ee.copy(te),z.update()}function y(){}function H(e){if(!1!==z.enabled){if(e.preventDefault(),e.button===z.mouseButtons.ORBIT){if(!1===z.enableRotate)return;s(e),I=X.ROTATE}else if(e.button===z.mouseButtons.ZOOM){if(!1===z.enableZoom)return;u(e),I=X.DOLLY}else if(e.button===z.mouseButtons.PAN){if(!1===z.enablePan)return;m(e),I=X.PAN}I!==X.NONE&&(document.addEventListener("mousemove",P,!1),document.addEventListener("mouseup",j,!1),document.addEventListener("mouseout",j,!1),z.dispatchEvent(U))}}function P(e){if(!1!==z.enabled)if(e.preventDefault(),I===X.ROTATE){if(!1===z.enableRotate)return;l(e)}else if(I===X.DOLLY){if(!1===z.enableZoom)return;E(e)}else if(I===X.PAN){if(!1===z.enablePan)return;h(e)}}function j(e){!1!==z.enabled&&(d(e),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",j,!1),document.removeEventListener("mouseout",j,!1),z.dispatchEvent(F),I=X.NONE)}function L(e){!1===z.enabled||!1===z.enableZoom||I!==X.NONE&&I!==X.ROTATE||(e.preventDefault(),e.stopPropagation(),p(e),z.dispatchEvent(U),z.dispatchEvent(F))}function M(e){!1!==z.enabled&&!1!==z.enableKeys&&!1!==z.enablePan&&b(e)}function w(e){if(!1!==z.enabled){switch(e.touches.length){case 1:if(!1===z.enableRotate)return;f(e),I=X.TOUCH_ROTATE;break;case 2:if(!1===z.enableZoom)return;v(e),I=X.TOUCH_DOLLY;break;case 3:if(!1===z.enablePan)return;g(e),I=X.TOUCH_PAN;break;default:I=X.NONE}I!==X.NONE&&z.dispatchEvent(U)}}function x(e){if(!1!==z.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===z.enableRotate)return;if(I!==X.TOUCH_ROTATE)return;T(e);break;case 2:if(!1===z.enableZoom)return;if(I!==X.TOUCH_DOLLY)return;R(e);break;case 3:if(!1===z.enablePan)return;if(I!==X.TOUCH_PAN)return;O(e);break;default:I=X.NONE}}function A(e){!1!==z.enabled&&(y(e),z.dispatchEvent(F),I=X.NONE)}function N(e){e.preventDefault()}var S,D,V,k,C;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return phi},this.getAzimuthalAngle=function(){return theta},this.reset=function(){z.target.copy(z.target0),z.object.position.copy(z.position0),z.object.zoom=z.zoom0,z.object.updateProjectionMatrix(),z.dispatchEvent(Z),z.update(),I=X.NONE},this.update=(S=new THREE.Vector3,D=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),V=D.clone().inverse(),k=new THREE.Vector3,C=new THREE.Quaternion,function(){var e=z.object.position;return S.copy(e).sub(z.target),S.applyQuaternion(D),B.setFromVector3(S),z.autoRotate&&I===X.NONE&&a(n()),B.theta+=q.theta,B.phi+=q.phi,B.theta=Math.max(z.minAzimuthAngle,Math.min(z.maxAzimuthAngle,B.theta)),B.phi=Math.max(z.minPolarAngle,Math.min(z.maxPolarAngle,B.phi)),B.makeSafe(),B.radius*=K,B.radius=Math.max(z.minDistance,Math.min(z.maxDistance,B.radius)),z.target.add(Q),S.setFromSpherical(B),S.applyQuaternion(V),e.copy(z.target).add(S),z.object.lookAt(z.target),!0===z.enableDamping?(q.theta*=1-z.dampingFactor,q.phi*=1-z.dampingFactor):q.set(0,0,0),K=1,Q.set(0,0,0),!!(G||k.distanceToSquared(z.object.position)>_||8*(1-C.dot(z.object.quaternion))>_)&&(z.dispatchEvent(Z),k.copy(z.object.position),C.copy(z.object.quaternion),G=!1,!0)}),this.dispose=function(){z.domElement.removeEventListener("contextmenu",N,!1),z.domElement.removeEventListener("mousedown",H,!1),z.domElement.removeEventListener("mousewheel",L,!1),z.domElement.removeEventListener("MozMousePixelScroll",L,!1),z.domElement.removeEventListener("touchstart",w,!1),z.domElement.removeEventListener("touchend",A,!1),z.domElement.removeEventListener("touchmove",x,!1),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",j,!1),document.removeEventListener("mouseout",j,!1),window.removeEventListener("keydown",M,!1)};var Y,z=this,Z={type:"change"},U={type:"start"},F={type:"end"},X={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},I=X.NONE,_=1e-6,B=new THREE.Spherical,q=new THREE.Spherical,K=1,Q=new THREE.Vector3,G=!1,W=new THREE.Vector2,J=new THREE.Vector2,$=new THREE.Vector2,ee=new THREE.Vector2,te=new THREE.Vector2,ne=new THREE.Vector2,oe=new THREE.Vector2,ae=new THREE.Vector2,ie=new THREE.Vector2,re=(Y=new THREE.Vector3,function(e,t){Y.setFromMatrixColumn(t,0),Y.multiplyScalar(-e),Q.add(Y)}),ce=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),Q.add(e)}}(),se=function(){var e=new THREE.Vector3;return function(t,n){var o=z.domElement===document?z.domElement.body:z.domElement;if(z.object instanceof THREE.PerspectiveCamera){var a=z.object.position;e.copy(a).sub(z.target);var i=e.length();i*=Math.tan(z.object.fov/2*Math.PI/180),re(2*t*i/o.clientHeight,z.object.matrix),ce(2*n*i/o.clientHeight,z.object.matrix)}else z.object instanceof THREE.OrthographicCamera?(re(t*(z.object.right-z.object.left)/z.object.zoom/o.clientWidth,z.object.matrix),ce(n*(z.object.top-z.object.bottom)/z.object.zoom/o.clientHeight,z.object.matrix)):z.enablePan=!1}}();z.domElement.addEventListener("contextmenu",N,!1),z.domElement.addEventListener("mousedown",H,!1),z.domElement.addEventListener("mousewheel",L,!1),z.domElement.addEventListener("MozMousePixelScroll",L,!1),z.domElement.addEventListener("touchstart",w,!1),z.domElement.addEventListener("touchend",A,!1),z.domElement.addEventListener("touchmove",x,!1),window.addEventListener("keydown",M,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return this.target}},noZoom:{get:function(){return!this.enableZoom},set:function(e){this.enableZoom=!e}},noRotate:{get:function(){return!this.enableRotate},set:function(e){this.enableRotate=!e}},noPan:{get:function(){return!this.enablePan},set:function(e){this.enablePan=!e}},noKeys:{get:function(){return!this.enableKeys},set:function(e){this.enableKeys=!e}},staticMoving:{get:function(){return!this.constraint.enableDamping},set:function(e){this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(e){this.constraint.dampingFactor=e}}});