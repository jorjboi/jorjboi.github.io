THREE.VRControls=function(i,t){function e(i){for(var e=0;e<i.length;e++)if("VRDisplay"in window&&i[e]instanceof VRDisplay||"PositionSensorVRDevice"in window&&i[e]instanceof PositionSensorVRDevice){o=i[e];break}o||t&&t("VR input not available.")}var o,n=this,s=new THREE.Matrix4;navigator.getVRDisplays?navigator.getVRDisplays().then(e):navigator.getVRDevices&&navigator.getVRDevices().then(e),this.scale=1,this.standing=!1,this.userHeight=1.6,this.update=function(){if(o){if(o.getPose){var t=o.getPose();null!==t.orientation&&i.quaternion.fromArray(t.orientation),null!==t.position?i.position.fromArray(t.position):i.position.set(0,0,0)}else{var e=o.getState();null!==e.orientation&&i.quaternion.copy(e.orientation),null!==e.position?i.position.copy(e.position):i.position.set(0,0,0)}this.standing&&(o.stageParameters?(i.updateMatrix(),s.fromArray(o.stageParameters.sittingToStandingTransform),i.applyMatrix(s)):i.position.setY(i.position.y+this.userHeight)),i.position.multiplyScalar(n.scale)}},this.resetPose=function(){o&&(void 0!==o.resetPose?o.resetPose():void 0!==o.resetSensor?o.resetSensor():void 0!==o.zeroSensor&&o.zeroSensor())},this.resetSensor=function(){this.resetPose()},this.zeroSensor=function(){this.resetPose()},this.dispose=function(){o=null}};