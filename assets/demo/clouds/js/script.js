function main_init(){(canvas=document.getElementById("panel")).getContext("2d");(camera=new THREE.Camera(30,window.innerWidth/window.innerHeight,1,5e3)).position.z=6e3,scene=new THREE.Scene,geometry=new THREE.Geometry,THREE.ImageUtils.crossOrigin="";var e=THREE.ImageUtils.loadTexture("images/clouds.png");e.magFilter=THREE.LinearMipMapLinearFilter,e.minFilter=THREE.LinearMipMapLinearFilter;var n=new THREE.Fog(2432306,-100,5e3);meshMaterial=new THREE.MeshShaderMaterial({uniforms:{map:{type:"t",value:2,texture:e},fogColor:{type:"c",value:n.color},fogNear:{type:"f",value:n.near},fogFar:{type:"f",value:n.far}},vertexShader:document.getElementById("vs").textContent,fragmentShader:document.getElementById("fs").textContent,depthTest:!1});var t=new THREE.Mesh(new THREE.PlaneGeometry(64,64));for(i=0;i<1e4;i++)t.position.x=1e3*Math.random()-500,t.position.y=-Math.random()*Math.random()*200-15,t.position.z=i,t.rotation.z=Math.random()*Math.PI,t.scale.x=t.scale.y=Math.random()*Math.random()*1.5+.5,THREE.GeometryUtils.merge(geometry,t);mesh=new THREE.Mesh(geometry,material),scene.addObject(mesh),(mesh=new THREE.Mesh(geometry,meshMaterial)).position.z=-1e4,scene.addObject(mesh),(renderer=new THREE.WebGLRenderer({antialias:!1})).setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement),document.addEventListener("mousemove",onMousemove,!1),window.addEventListener("resize",onResize,!1),setInterval(drawScene,30)}function onMousemove(e){mouseX=.3*(e.clientX-windowHalfX),mouseY=.2*(e.clientY-windowHalfY)}function onResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function drawScene(){position=.1*((new Date).getTime()-startTime)%1e4,camera.position.x+=.01*mouseX,camera.position.y+=.01*-mouseY,camera.position.z=1e4-position,renderer.render(scene,camera)}var canvas,ctx,camera,scene,renderer,meshMaterial,mesh,geometry,i,f,mouseX=0,mouseY=0,startTime=(new Date).getTime(),windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;if(window.attachEvent)window.attachEvent("onload",main_init);else if(window.onload){var curronload=window.onload,newonload=function(){curronload(),main_init()};window.onload=newonload}else window.onload=main_init;