<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Mesh Editor | George Geng </title> <meta name="author" content="George Geng"> <meta name="description" content="A tool to create a mesh out of a Bezier surface, upsample with loop subdivision, and visualize Phong shading and environment mapping."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.png?98ab68992a4209ac66024f789453914e"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jorjboi.github.io/projects/mesh_editor/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">George</span> Geng </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/art/">art </a> </li> <li class="nav-item "> <a class="nav-link" href="/papers/">papers </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Mesh Editor</h1> <p class="post-description">A tool to create a mesh out of a Bezier surface, upsample with loop subdivision, and visualize Phong shading and environment mapping.</p> </header> <article> <ul> <li><a href="#overview">Overview</a></li> <li><a href="#bezier-patches">Bezier Patches</a></li> <li><a href="#smooth-shading">Smooth Shading</a></li> <li><a href="#edge-flip">Edge Flip</a></li> <li><a href="#edge-split">Edge Split</a></li> <li><a href="#mesh-upsampling">Mesh Upsampling</a></li> <li><a href="#phong-shading-and-environment-mapping">Phong Shading and Environment Mapping</a></li> </ul> <h2 id="overview">Overview</h2> <p>This project explored the geometry of 3D modeling by creating a tool that can display and make simple edits to a COLLADA mesh file. It can tessellate a Bezier surface and upsample a mesh, and implements Phong shading and environment mapping.</p> <p>I can also use my program to load and shade a custom model that I created in the open-source 3D computer graphics and animation software, Blender!</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/teapot_header.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="teapot" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <h2 id="bezier-patches">Bezier Patches</h2> <p>Given a 4-by-4 grid of Bezier control points, I can evaluate all points on the corresponding bicubic Bezier patch using the Bernstein polynomials of degree 3. A Bezier surface can be represented as a continuous set of Bezier curves, parametrized by <code class="language-plaintext highlighter-rouge">(u, v)</code> coordinates in the range <code class="language-plaintext highlighter-rouge">[0, 1] x [0, 1]</code>.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/bezier_patch.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="bicubic bezier patch" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>A 9 x 9 grid of evenly spaced <code class="language-plaintext highlighter-rouge">(u, v)</code> coordinates were used as sample points to evaluate our Bezier surface. The resulting vectors were then taken 3 at a time to tesselate the surface using triangles. Here, we evaluate the Bezier surface for a teapot mesh.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/tesselated_teapot.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="bicubic bezier patch" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <h2 id="smooth-shading">Smooth Shading</h2> <p>To implement smooth shading, I need to compute the area-weighted average normal for each vertex, which requires iterating through the vertex’s neighboring vertices. We can perform this traversal by using the halfedge data structure for mesh representation.</p> <div class="row justify-content-sm-center"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/half_edge_structure.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="halfedge structure" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/traversal.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="traversal" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>A mesh consists of faces, edges, vertices, and halfedges, which tie together all the other elements. We can iterate through the neighboring vertices around a vertex by starting from the twin of a vertex’s halfedge (so that it points inwards from a neighbor) and then repeatedly taking the twin of the next halfedge, ignoring faces on the boundary.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/smoothed_teapot.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="smoothed teapot" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Teapot with smooth shading </div> <hr> <h2 id="edge-flip">Edge Flip</h2> <p>I implement functionality to flip a non-boundary edge in a mesh. Flipping edge cb in the diagram below should create a new edge ad, and give us triangles adc and abd.</p> <p>This process starts with identifying all elements in the original mesh of a pair of triangles: 6 half-edges, 2 faces, 5 edges, and 4 vertices. We then systematically set the pointers for these elements to their new values (after the edge flip is complete). This operation doesn’t create or destroy any new mesh elements.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/edge_flip_diagram.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="edge flip diagram" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>This process starts with identifying all elements in the original mesh of a pair of triangles: 6 half-edges, 2 faces, 5 edges, and 4 vertices. We then systematically set the pointers for these elements to their new values (after the edge flip is complete). This operation doesn’t create or destroy any new mesh elements.</p> <div class="row justify-content-sm-center"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/diagonal_edge_flip.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="diagonal edge flip" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/vertical_edge_flip.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="vertical edge flip" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Diagonal and vertical edge flips </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/multiple_edge_flip.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="multiple edge flips" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Multiple edge flips </div> <hr> <h2 id="edge-split">Edge Split</h2> <p>An edge split operation creates 1 new vertex, 3 new edges and 2 new faces.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/edge_split_diagram.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="edge split diagram" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>As before, I begin by identifying all the half-edges, vertices, edges, and faces that are present in the original mesh of a pair of triangles. To split a non-boundary edge, I reassign pointers of the original elements if necessary, and create 1 new vertex, 6 new half-edges, 3 new edges, and 2 new faces, setting their neighbors as appropriate.</p> <p>Here is the teapot mesh after multiple edge split operations.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/multiple_edge_split.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="multiple edge split" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <h2 id="mesh-upsampling">Mesh Upsampling</h2> <p>Once we can flip and split edges, we can upsample a mesh via loop subdivision. The subdivision algorithm:</p> <ul> <li>split each edge to create a new vertex along every edge in the mesh</li> <li>flip new edges that connect an old and a new vertex</li> <li>move each vertex to its updated location, a precomputed average of its neighboring vertices before the split</li> </ul> <p>Here is loop subdivision performed on several meshes:</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/teapot_upsample_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original teapot" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/teapot_upsample_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Teapot upsampled once" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/teapot_upsample_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Teapot upsampled twice" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/bean_upsample_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original bean" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/bean_upsample_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Bean upsampled once" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/bean_upsample_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Bean upsampled twice" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row justify-content-sm-center"> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/beast_upsample_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Original beast" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-6 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/beast_upsample_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Beast upsampled once" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <h2 id="phong-shading-and-environment-mapping">Phong Shading and Environment Mapping</h2> <p>I implemented Phong shading and environment map reflection shading of models with GLSL. The Phong shading model is given by <code class="language-plaintext highlighter-rouge">L = La + Ld + Ls</code>, where <code class="language-plaintext highlighter-rouge">La</code>, <code class="language-plaintext highlighter-rouge">Ld</code>, and <code class="language-plaintext highlighter-rouge">Ls</code> are the ambient light, diffuse light, and specular light respectively. <code class="language-plaintext highlighter-rouge">La</code> depends on the ambient light coefficient and ambient light intensity. <code class="language-plaintext highlighter-rouge">Ld</code> is computed from the unit surface normal vector and the unit vector that points towards our light source. Similarly, <code class="language-plaintext highlighter-rouge">Ls</code> is computed from the unit surface normal vector and the bisecting vector between the vector towards the light source and the vector towards the camera. The results of Phong shading are displayed below.</p> <div class="row justify-content-sm-center"> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/phong_shading_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Phong shading on teapot" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/phong_shading_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Phong shading on teapot" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/phong_shading_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Phong shading on teapot" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>For environment mapping, the we compute the reflection direction from the surface normal vector and the vector towards eye position. The angles <code class="language-plaintext highlighter-rouge">θ</code> (angle between the vector projection on the xy plane and the x-axis) and <code class="language-plaintext highlighter-rouge">ρ</code> (angle between the vector project on either the xz or yz plane and the z-axis) are computed from the reflection vector, and used as texture coordinates for our envionrment texture file. The results of reflective environmental mapping are shown below.</p> <div class="row justify-content-sm-center"> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/env_map_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Environment mapping on teapot" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/env_map_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Environment mapping on teapot" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" sizes="95vw"></source> <img src="/assets/img/mesh_editor/env_map_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Environment mapping on teapot" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?70d799092f862ad98c7876aa47712e20"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>